<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DDIA on HiwiK</title><link>/categories/ddia/</link><description>Recent content in DDIA on HiwiK</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Hong Sikun</copyright><lastBuildDate>Tue, 08 Oct 2024 22:42:52 +0800</lastBuildDate><atom:link href="/categories/ddia/index.xml" rel="self" type="application/rss+xml"/><item><title>DDIA</title><link>/hiwikhome/ddia/</link><pubDate>Tue, 08 Oct 2024 22:42:52 +0800</pubDate><guid>/hiwikhome/ddia/</guid><description>&lt;img src="/hiwikhome/ddia/post.png" alt="Featured image of post DDIA" />&lt;h1 id="-part-1-æ•°æ®ç³»ç»Ÿçš„åŸºçŸ³">ðŸŒ Part 1 æ•°æ®ç³»ç»Ÿçš„åŸºçŸ³&lt;/h1>
&lt;h2 id="ch-1-å¯é æ€§å¯ä¼¸ç¼©æ€§å’Œå¯ç»´æŠ¤æ€§">ðŸ›¡ï¸CH 1 å¯é æ€§ã€å¯ä¼¸ç¼©æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/h2>
&lt;h3 id="æœåŠ¡çº§åˆ«ç›®æ ‡slo-service-level-objectives">æœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLO, Service Level Objectivesï¼‰&lt;/h3>
&lt;p>æœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLOï¼‰æ˜¯ä¸€ç§æ€§èƒ½ç›®æ ‡ï¼Œå®ƒå®šä¹‰äº†æœåŠ¡æä¾›è€…å¸Œæœ›è¾¾åˆ°çš„æœåŠ¡æ°´å¹³ã€‚SLOé€šå¸¸åŒ…æ‹¬æœåŠ¡çš„å¯ç”¨æ€§ã€å“åº”æ—¶é—´ã€åžåé‡ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIsï¼‰ã€‚SLOæ˜¯æœåŠ¡æä¾›è€…å†…éƒ¨çš„ç›®æ ‡ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºŽç›‘æŽ§æœåŠ¡æ€§èƒ½ï¼Œå¹¶ä½œä¸ºæ”¹è¿›æœåŠ¡çš„åŸºå‡†ã€‚SLOæ˜¯æœåŠ¡çº§åˆ«åè®®ï¼ˆSLAï¼‰çš„åŸºç¡€ï¼Œä½†å®ƒä»¬ä¸å…·æœ‰æ³•å¾‹çº¦æŸåŠ›ï¼Œæ›´å¤šæ˜¯ä½œä¸ºå†…éƒ¨æ ‡å‡†æ¥ä½¿ç”¨ã€‚&lt;/p>
&lt;h3 id="æœåŠ¡çº§åˆ«åè®®sla-service-level-agreements">æœåŠ¡çº§åˆ«åè®®ï¼ˆSLA, Service Level Agreementsï¼‰&lt;/h3>
&lt;p>æœåŠ¡çº§åˆ«åè®®ï¼ˆSLAï¼‰æ˜¯æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ­£å¼åè®®ï¼Œå®ƒè¯¦ç»†è¯´æ˜Žäº†æœåŠ¡æä¾›è€…æ‰¿è¯ºæä¾›çš„æœåŠ¡æ°´å¹³ã€‚SLAé€šå¸¸åŒ…æ‹¬æœåŠ¡çš„å¯ç”¨æ€§ã€å“åº”æ—¶é—´ã€æ”¯æŒæ°´å¹³ã€é—®é¢˜è§£å†³æ—¶é—´ç­‰æŒ‡æ ‡ï¼Œå¹¶ä¸”è¿™äº›æŒ‡æ ‡éƒ½æœ‰æ˜Žç¡®çš„æœåŠ¡çº§åˆ«ç›®æ ‡ã€‚SLAå…·æœ‰æ³•å¾‹çº¦æŸåŠ›ï¼Œå¦‚æžœæœåŠ¡æä¾›è€…æœªèƒ½è¾¾åˆ°SLAä¸­è§„å®šçš„æ ‡å‡†ï¼Œå¯èƒ½ä¼šé¢ä¸´ç½šæ¬¾æˆ–å…¶ä»–å½¢å¼çš„å¤„ç½šã€‚&lt;/p>
&lt;h3 id="å¤´éƒ¨é˜»å¡žhead-of-line-blocking-hol-blocking">å¤´éƒ¨é˜»å¡žï¼ˆHead-of-Line Blocking, HOL Blockingï¼‰&lt;/h3>
&lt;p>å¤´éƒ¨é˜»å¡žæ˜¯è®¡ç®—æœºç½‘ç»œå’Œå¤šçº¿ç¨‹ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯åœ¨å¤šé˜Ÿåˆ—ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªé˜Ÿåˆ—çš„å¤´éƒ¨ï¼ˆå³ç­‰å¾…æ—¶é—´æœ€é•¿çš„å…ƒç´ ï¼‰ç”±äºŽèµ„æºè¢«å…¶ä»–é˜Ÿåˆ—å ç”¨è€Œæ— æ³•å‰è¿›ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ä¸‹é™ã€‚ä¾‹å¦‚ï¼Œåœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œå¦‚æžœä¸€ä¸ªäº‹åŠ¡æŒæœ‰é”å¹¶ä¸”æ­£åœ¨ç­‰å¾…å…¶ä»–èµ„æºï¼Œå®ƒå°±ä¼šé˜»å¡žåœ¨å…¶åŽé¢çš„æ‰€æœ‰äº‹åŠ¡ï¼Œå³ä½¿è¿™äº›äº‹åŠ¡ä¸ä¾èµ–äºŽè¢«é”å®šçš„èµ„æºã€‚è¿™ç§çŽ°è±¡ä¼šå¯¼è‡´ç³»ç»Ÿæ•ˆçŽ‡é™ä½Žï¼Œå› ä¸ºå®ƒé˜»æ­¢äº†å…¶ä»–å¯ä»¥ç‹¬ç«‹å¤„ç†çš„äº‹åŠ¡çš„æ‰§è¡Œã€‚&lt;/p>
&lt;h3 id="æŽ’é˜Ÿå»¶è¿Ÿqueueing-delay">æŽ’é˜Ÿå»¶è¿Ÿï¼ˆqueueing delayï¼‰&lt;/h3>
&lt;p>æŽ’é˜Ÿå»¶è¿Ÿé€šå¸¸å äº†é«˜ç™¾åˆ†ä½ç‚¹å¤„å“åº”æ—¶é—´çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ç”±äºŽæœåŠ¡å™¨åªèƒ½å¹¶è¡Œå¤„ç†å°‘é‡çš„äº‹åŠ¡ï¼ˆå¦‚å—å…¶ CPU æ ¸æ•°çš„é™åˆ¶ï¼‰ï¼Œæ‰€ä»¥åªè¦æœ‰å°‘é‡ç¼“æ…¢çš„è¯·æ±‚å°±èƒ½é˜»ç¢åŽç»­è¯·æ±‚çš„å¤„ç†ï¼Œè¿™ç§æ•ˆåº”æœ‰æ—¶è¢«ç§°ä¸º&amp;hellip;&lt;/p>
&lt;h3 id="å¯é æ€§reliability">å¯é æ€§ï¼ˆReliabilityï¼‰&lt;/h3>
&lt;p>å¯é æ€§æ„å‘³ç€å³ä½¿å‘ç”Ÿæ•…éšœï¼Œç³»ç»Ÿä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚æ•…éšœå¯èƒ½å‘ç”Ÿåœ¨ç¡¬ä»¶ï¼ˆé€šå¸¸æ˜¯éšæœºçš„å’Œä¸ç›¸å…³çš„ï¼‰ã€è½¯ä»¶ï¼ˆé€šå¸¸æ˜¯ç³»ç»Ÿæ€§çš„ Bugï¼Œå¾ˆéš¾å¤„ç†ï¼‰å’Œäººç±»ï¼ˆä¸å¯é¿å…åœ°æ—¶ä¸æ—¶å‡ºé”™ï¼‰ã€‚&lt;strong>å®¹é”™æŠ€æœ¯&lt;/strong> å¯ä»¥å¯¹ç»ˆç«¯ç”¨æˆ·éšè—æŸäº›ç±»åž‹çš„æ•…éšœã€‚&lt;/p>
&lt;h3 id="å¯ä¼¸ç¼©æ€§scalability">å¯ä¼¸ç¼©æ€§ï¼ˆScalabilityï¼‰&lt;/h3>
&lt;p>å¯ä¼¸ç¼©æ€§æ„å‘³ç€å³ä½¿åœ¨è´Ÿè½½å¢žåŠ çš„æƒ…å†µä¸‹ä¹Ÿæœ‰ä¿æŒæ€§èƒ½çš„ç­–ç•¥ã€‚ä¸ºäº†è®¨è®ºå¯ä¼¸ç¼©æ€§ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å®šé‡æè¿°è´Ÿè½½å’Œæ€§èƒ½çš„æ–¹æ³•ã€‚æˆ‘ä»¬ç®€è¦äº†è§£äº†æŽ¨ç‰¹ä¸»é¡µæ—¶é—´çº¿çš„ä¾‹å­ï¼Œä»‹ç»æè¿°è´Ÿè½½çš„æ–¹æ³•ï¼Œå¹¶å°†å“åº”æ—¶é—´ç™¾åˆ†ä½ç‚¹ä½œä¸ºè¡¡é‡æ€§èƒ½çš„ä¸€ç§æ–¹å¼ã€‚åœ¨å¯ä¼¸ç¼©çš„ç³»ç»Ÿä¸­å¯ä»¥æ·»åŠ  &lt;strong>å¤„ç†å®¹é‡&lt;/strong> ä»¥åœ¨é«˜è´Ÿè½½ä¸‹ä¿æŒå¯é ã€‚&lt;/p>
&lt;h3 id="å¯ç»´æŠ¤æ€§maintainability">å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰&lt;/h3>
&lt;p>å¯ç»´æŠ¤æ€§æœ‰è®¸å¤šæ–¹é¢ï¼Œä½†å®žè´¨ä¸Šæ˜¯å…³äºŽå·¥ç¨‹å¸ˆå’Œè¿ç»´å›¢é˜Ÿçš„ç”Ÿæ´»è´¨é‡çš„ã€‚è‰¯å¥½çš„æŠ½è±¡å¯ä»¥å¸®åŠ©é™ä½Žå¤æ‚åº¦ï¼Œå¹¶ä½¿ç³»ç»Ÿæ˜“äºŽä¿®æ”¹å’Œé€‚åº”æ–°çš„åº”ç”¨åœºæ™¯ã€‚è‰¯å¥½çš„å¯æ“ä½œæ€§æ„å‘³ç€å¯¹ç³»ç»Ÿçš„å¥åº·çŠ¶æ€å…·æœ‰è‰¯å¥½çš„å¯è§æ€§ï¼Œå¹¶æ‹¥æœ‰æœ‰æ•ˆçš„ç®¡ç†æ‰‹æ®µã€‚&lt;/p>
&lt;h2 id="-ch-2-æ•°æ®æ¨¡åž‹ä¸ŽæŸ¥è¯¢è¯­è¨€">ðŸ”‘ CH 2 æ•°æ®æ¨¡åž‹ä¸ŽæŸ¥è¯¢è¯­è¨€&lt;/h2>
&lt;ul>
&lt;li>MySQL æ‰§è¡Œ &lt;code>ALTER TABLE&lt;/code> æ—¶ä¼šå¤åˆ¶æ•´ä¸ªè¡¨ï¼Œå¯ä»¥é€šè¿‡ä¼˜åŒ– &lt;code>ALTER TABLE &lt;/code>å‘½ä»¤çš„æ‰§è¡Œæˆ–ä½¿ç”¨ç‰¹å®šçš„å·¥å…·æ¥å‡å°‘è¿™ç§å½±å“ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¦‚ &lt;code>pt-online-schema-change&lt;/code> ç­‰åœ¨çº¿è¡¨ç»“æž„å˜æ›´å·¥å…·ï¼Œå¯ä»¥åœ¨ä¸é”å®šæ•´ä¸ªè¡¨çš„æƒ…å†µä¸‹è¿›è¡Œè¡¨ç»“æž„çš„æ›´æ”¹ã€‚&lt;/li>
&lt;li>é€šå¸¸å¯¹äºŽå£°æ˜Žå¼æŸ¥è¯¢è¯­è¨€æ¥è¯´ï¼Œåœ¨ç¼–å†™æŸ¥è¯¢è¯­å¥æ—¶ï¼Œä¸éœ€è¦æŒ‡å®šæ‰§è¡Œç»†èŠ‚ï¼šæŸ¥è¯¢ä¼˜åŒ–ç¨‹åºä¼šè‡ªåŠ¨é€‰æ‹©é¢„æµ‹æ•ˆçŽ‡æœ€é«˜çš„ç­–ç•¥ï¼Œå› æ­¤ä½ å¯ä»¥ä¸“æ³¨äºŽç¼–å†™åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="-ch-3-å­˜å‚¨ä¸Žæ£€ç´¢">ðŸ’¾ CH 3 å­˜å‚¨ä¸Žæ£€ç´¢&lt;/h2>
&lt;h3 id="sstablesorted-string-tableæŽ’åºå­—ç¬¦ä¸²è¡¨">SSTableï¼šSorted String Tableï¼ˆæŽ’åºå­—ç¬¦ä¸²è¡¨ï¼‰&lt;/h3>
&lt;h4 id="æŽ’åºçš„é”®å€¼å¯¹">æŽ’åºçš„é”®å€¼å¯¹&lt;/h4>
&lt;p>SSTable åŒ…å«ä¸€ç³»åˆ—æŽ’åºçš„é”®å€¼å¯¹ï¼Œè¿™ç§æŽ’åºæ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜ä¹‹å‰å°±å®Œæˆçš„ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾— SSTable èƒ½å¤Ÿæ”¯æŒé«˜æ•ˆçš„èŒƒå›´æŸ¥è¯¢å’Œé¡ºåºè¯»å–æ“ä½œã€‚&lt;/p>
&lt;h4 id="ä¸å¯å˜æ€§">ä¸å¯å˜æ€§&lt;/h4>
&lt;p>ä¸€æ—¦åˆ›å»ºï¼ŒSSTable çš„å†…å®¹ä¸ä¼šæ”¹å˜ã€‚è¿™ä½¿å¾— SSTable éžå¸¸é€‚åˆå¹¶å‘è¯»å–ï¼ŒåŒæ—¶ç®€åŒ–äº†æ•°æ®çš„åˆå¹¶ã€ç¼“å­˜å’Œæ¢å¤æ“ä½œã€‚&lt;/p>
&lt;h4 id="ç´¢å¼•">ç´¢å¼•&lt;/h4>
&lt;p>ä¸ºäº†å¿«é€ŸæŸ¥æ‰¾æ•°æ®ï¼ŒSSTable é€šå¸¸åŒ…å«ä¸€ä¸ªç´¢å¼•éƒ¨åˆ†ï¼Œè®°å½•äº†é”®åˆ°æ•°æ®åœ¨æ–‡ä»¶ä¸­ä½ç½®çš„æ˜ å°„ã€‚è¿™ä¸ªç´¢å¼•å¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶çš„æœ«å°¾ï¼Œä¹Ÿå¯ä»¥éƒ¨åˆ†æˆ–å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ä»¥æé«˜æŸ¥æ‰¾é€Ÿåº¦ã€‚&lt;/p>
&lt;h4 id="å…ƒæ•°æ®">å…ƒæ•°æ®&lt;/h4>
&lt;p>SSTable å¯ä»¥åŒ…å«é¢å¤–çš„å…ƒæ•°æ®ï¼Œå¦‚æœ€å°å’Œæœ€å¤§çš„é”®ï¼Œè¿™æœ‰åŠ©äºŽåœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶å¿«é€Ÿç¡®å®šæ˜¯å¦éœ€è¦æŸ¥é˜…ç‰¹å®šçš„ SSTableã€‚&lt;/p>
&lt;h4 id="åŽ‹ç¼©">åŽ‹ç¼©&lt;/h4>
&lt;p>ä¸ºäº†èŠ‚çœå­˜å‚¨ç©ºé—´ï¼ŒSSTable æ–‡ä»¶é€šå¸¸ä¼šè¢«åŽ‹ç¼©ã€‚å¸¸è§çš„åŽ‹ç¼©ç®—æ³•åŒ…æ‹¬ Snappyã€Zlib ç­‰ã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨-sstable-çš„å­˜å‚¨å¼•æ“Žå·¥ä½œæ–¹å¼">ä½¿ç”¨ SSTable çš„å­˜å‚¨å¼•æ“Žå·¥ä½œæ–¹å¼&lt;/h3>
&lt;ul>
&lt;li>æ–°å†™å…¥çš„æ•°æ®é¦–å…ˆæ·»åŠ è‡³å†…å­˜çš„å¹³è¡¡æ ‘æ•°æ®ç»“æž„ï¼Œè¿™ä¸ªå†…å­˜æ ‘æœ‰æ—¶è¢«ç§°ä¸ºå†…å­˜è¡¨ï¼ˆmemtableï¼‰ã€‚&lt;/li>
&lt;li>å½“å†…å­˜è¡¨å¤§äºŽæŸä¸ªé˜ˆå€¼æ—¶ï¼Œå°†å…¶ä½œä¸º SSTable å†™å…¥ç¡¬ç›˜ï¼Œæ–°çš„ SSTable æ–‡ä»¶æˆä¸ºæ•°æ®åº“çš„æœ€æ–°æ®µï¼Œæ–°çš„å†…å®¹åˆå¯ä»¥å†™å…¥ä¸€ä¸ªæœ€æ–°çš„å†…å­˜è¡¨å®žä¾‹ã€‚&lt;/li>
&lt;li>æ”¶åˆ°è¯·æ±‚åŽï¼Œä¼˜å…ˆåœ¨å†…å­˜è¡¨å¯»æ‰¾ï¼ŒæŽ¥ç€å†åˆ°æœ€è¿‘çš„ç¡¬ç›˜æ®µï¼Œå¦‚æžœè¿˜æ²¡æœ‰å†æ‰¾ä¸‹ä¸€ä¸ªè¾ƒæ—§çš„ç¡¬ç›˜æ®µï¼Œä»¥æ­¤ç±»æŽ¨ã€‚&lt;/li>
&lt;li>åŽå°è¿è¡Œä¸€ä¸ªåˆå¹¶å’ŒåŽ‹ç¼©è¿›ç¨‹ï¼Œä»¥åˆå¹¶æ®µæ–‡ä»¶å¹¶å°†å·²è¦†ç›–æˆ–åˆ é™¤çš„æ—§é”®åˆ é™¤ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="lsm-æ ‘log-structured-merge-tree">LSM æ ‘ï¼ˆLog-Structured Merge-treeï¼‰&lt;/h3>
&lt;p>LSM æ ‘æ˜¯ä¸€ç§æ•°æ®ç»“æž„ï¼Œç”¨äºŽé«˜æ•ˆç®¡ç†åœ¨æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿä¸­çš„å¤§é‡å†™æ“ä½œã€‚LSM æ ‘é€šè¿‡å°†æ›´æ–°æ“ä½œå†™å…¥åˆ°å†…å­˜ä¸­çš„ç»“æž„ï¼Œå¹¶ä¸”å®šæœŸåˆå¹¶åˆ°ç£ç›˜ä¸Šï¼Œä¼˜åŒ–äº†å†™å…¥æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤„ç†å¤§é‡å†™å…¥æ“ä½œçš„åº”ç”¨åœºæ™¯ä¸­ã€‚&lt;/p>
&lt;h4 id="å·¥ä½œåŽŸç†">å·¥ä½œåŽŸç†&lt;/h4>
&lt;ol>
&lt;li>&lt;strong>å†…å­˜ä¸­çš„å†™å…¥&lt;/strong>ï¼šå½“è¿›è¡Œæ•°æ®æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œæ—¶ï¼ŒLSM æ ‘é¦–å…ˆå°†è¿™äº›å˜æ›´å†™å…¥åˆ°ä¸€ä¸ªå†…å­˜ä¸­çš„æ•°æ®ç»“æž„ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¹³è¡¡æ ‘ï¼Œå¦‚çº¢é»‘æ ‘æˆ–AVLæ ‘ï¼‰ï¼Œç§°ä¸º MemTableã€‚&lt;/li>
&lt;li>&lt;strong>æ—¥å¿—å†™å…¥&lt;/strong>ï¼šä¸ºäº†é˜²æ­¢åœ¨ç³»ç»Ÿå´©æºƒæ—¶ä¸¢å¤±æ•°æ®ï¼Œè¿™äº›æ›´æ”¹ä¹Ÿä¼šè¢«å†™å…¥åˆ°ä¸€ä¸ªæŒä¹…åŒ–çš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/li>
&lt;li>&lt;strong>ç£ç›˜åˆå¹¶&lt;/strong>ï¼šå½“ MemTable è¾¾åˆ°ä¸€å®šå¤§å°åŽï¼Œå®ƒä¼šè¢«è½¬æ¢æˆä¸€ä¸ªä¸å¯å˜çš„ç£ç›˜æ–‡ä»¶ï¼Œç§°ä¸º SSTableï¼ˆSorted String Tableï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºåˆ·æ–°ï¼ˆFlushï¼‰ã€‚&lt;/li>
&lt;li>&lt;strong>åŽå°åˆå¹¶&lt;/strong>ï¼šéšç€æ—¶é—´çš„æŽ¨ç§»ï¼Œè¿™äº› SSTable ä¼šä¸æ–­å¢žåŠ ã€‚LSM æ ‘å°†å®šæœŸåœ¨åŽå°å¯¹è¿™äº› SSTable è¿›è¡Œåˆå¹¶å’ŒåŽ‹ç¼©ï¼ˆCompactionï¼‰ï¼Œä»¥ä¿æŒæŸ¥è¯¢æ•ˆçŽ‡å¹¶å›žæ”¶ç©ºé—´ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="ä¼˜åŠ¿ä¸ŽåŠ£åŠ¿">ä¼˜åŠ¿ä¸ŽåŠ£åŠ¿&lt;/h4>
&lt;ul>
&lt;li>&lt;strong>é«˜æ•ˆçš„å†™å…¥æ€§èƒ½&lt;/strong>ï¼šç”±äºŽæ‰€æœ‰çš„å†™å…¥é¦–å…ˆè¿›å…¥å†…å­˜ï¼Œç„¶åŽå¼‚æ­¥æ‰¹é‡å†™å…¥ç£ç›˜ï¼Œå› æ­¤å¯ä»¥èŽ·å¾—éžå¸¸é«˜çš„å†™å…¥æ€§èƒ½ã€‚&lt;/li>
&lt;li>&lt;strong>å†™å…¥æ”¾å¤§é—®é¢˜çš„ç¼“è§£&lt;/strong>ï¼šè™½ç„¶ LSM æ ‘åœ¨åˆå¹¶å’ŒåŽ‹ç¼©æ•°æ®æ—¶ä¼šäº§ç”Ÿé¢å¤–çš„ç£ç›˜å†™å…¥ï¼Œä½†é€šè¿‡ä¼˜åŒ–è¿™äº›æ“ä½œå¯ä»¥æœ‰æ•ˆç®¡ç†å†™å…¥æ”¾å¤§é—®é¢˜ã€‚&lt;/li>
&lt;li>&lt;strong>é€‚åº”å¤§æ•°æ®é‡çš„å†™å…¥&lt;/strong>ï¼šLSM æ ‘éžå¸¸é€‚åˆéœ€è¦å¤„ç†å¤§é‡å†™å…¥æ“ä½œçš„åº”ç”¨ï¼Œå¦‚æ—¥å¿—æ•°æ®å¤„ç†å’Œå®žæ—¶æ•°æ®åˆ†æžã€‚&lt;/li>
&lt;li>&lt;strong>è¯»å–æ€§èƒ½å¯èƒ½è¾ƒä½Ž&lt;/strong>ï¼šç”±äºŽæ•°æ®åˆ†æ•£åœ¨å¤šä¸ª SSTable ä¸­ï¼Œè¯»å–æ“ä½œå¯èƒ½éœ€è¦åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œå¯¼è‡´è¯»å–æ€§èƒ½ä¸å¦‚ B-tree ç­‰ç»“æž„ã€‚&lt;/li>
&lt;li>&lt;strong>ç©ºé—´å’Œå†™å…¥æ”¾å¤§&lt;/strong>ï¼šæ•°æ®åœ¨åˆå¹¶è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«é‡å†™å¤šæ¬¡ï¼Œå¯¼è‡´ç£ç›˜ä½¿ç”¨æ•ˆçŽ‡è¾ƒä½Žå’Œè¾ƒé«˜çš„å†™å…¥æ”¾å¤§ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="bloom-filters">Bloom Filters&lt;/h3>
&lt;p>Bloom filter æ˜¯ä¸€ç§ç©ºé—´æ•ˆçŽ‡å¾ˆé«˜çš„æ¦‚çŽ‡æ€§æ•°æ®ç»“æž„ï¼Œç”¨äºŽæµ‹è¯•ä¸€ä¸ªå…ƒç´ æ˜¯å¦å±žäºŽä¸€ä¸ªé›†åˆã€‚å®ƒå…è®¸æœ‰è¯¯æŠ¥ï¼ˆfalse positivesï¼‰çš„å­˜åœ¨ï¼Œå³å¯èƒ½ä¼šé”™è¯¯åœ°åˆ¤æ–­æŸä¸ªä¸å­˜åœ¨çš„å…ƒç´ ä¸ºå­˜åœ¨äºŽé›†åˆä¸­ï¼Œä½†ç»ä¸ä¼šæœ‰æ¼æŠ¥ï¼ˆfalse negativesï¼‰ï¼Œå³å¦‚æžœå®ƒè¯´æŸä¸ªå…ƒç´ ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ ä¸€å®šä¸å­˜åœ¨äºŽé›†åˆä¸­ã€‚&lt;/p>
&lt;h4 id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ&lt;/h4>
&lt;ul>
&lt;li>&lt;strong>æ·»åŠ å…ƒç´ &lt;/strong>ï¼šå°†å…ƒç´ é€šè¿‡å¤šä¸ªå“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°ä¸€ç³»åˆ—ä½ç½®ï¼Œå¹¶åœ¨è¿™äº›ä½ç½®ä¸Šè®¾ç½®æ ‡è®°ã€‚&lt;/li>
&lt;li>&lt;strong>æŸ¥è¯¢å…ƒç´ &lt;/strong>ï¼šå¯¹äºŽç»™å®šçš„å…ƒç´ ï¼Œå†æ¬¡ä½¿ç”¨ç›¸åŒçš„å“ˆå¸Œå‡½æ•°è®¡ç®—ä½ç½®ï¼Œå¦‚æžœæ‰€æœ‰ç›¸å…³ä½ç½®éƒ½è¢«æ ‡è®°äº†ï¼Œé‚£ä¹ˆå…ƒç´ å¯èƒ½å­˜åœ¨ï¼›å¦‚æžœæœ‰ä»»ä½•ä¸€ä¸ªä½ç½®æœªè¢«æ ‡è®°ï¼Œåˆ™å…ƒç´ ä¸€å®šä¸å­˜åœ¨ã€‚&lt;/li>
&lt;/ul>
&lt;p>Bloom filter é€šå¸¸ç”¨åœ¨æ•°æ®åº“å’Œç¼“å­˜ç³»ç»Ÿä¸­ï¼Œä»¥å‡å°‘å¯¹ç£ç›˜çš„ä¸å¿…è¦è®¿é—®ï¼Œä»Žè€Œæé«˜æ€§èƒ½ã€‚&lt;/p>
&lt;h3 id="size-tiered-å’Œ-leveled-compaction">Size-Tiered å’Œ Leveled Compaction&lt;/h3>
&lt;p>è¿™ä¸¤ç§æœ¯è¯­æ¥è‡ªäºŽæ•°æ®åº“ç³»ç»Ÿä¸­ç”¨äºŽç®¡ç†å­˜å‚¨çš„åŽ‹ç¼©ç­–ç•¥ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ LSM æ ‘ç»“æž„çš„ç³»ç»Ÿä¸­ã€‚&lt;/p>
&lt;h4 id="size-tiered-compaction-å¤§å°åˆ†å±‚åŽ‹ç¼©">Size-Tiered Compaction (å¤§å°åˆ†å±‚åŽ‹ç¼©)&lt;/h4>
&lt;ul>
&lt;li>è¿™ç§åŽ‹ç¼©ç­–ç•¥ä¸»è¦æ˜¯å°†å¤§å°ç›¸ä¼¼çš„ SSTables åˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„ SSTableã€‚å½“ä¸€ç»„ SSTable çš„æ€»å¤§å°è¾¾åˆ°é¢„è®¾çš„é˜ˆå€¼æ—¶ï¼Œå®ƒä»¬ä¼šè¢«åˆå¹¶ã€‚&lt;/li>
&lt;li>ä¼˜ç‚¹ï¼šé€‚åˆå†™å…¥é‡å¤§ã€è¯»å–é‡å°çš„åœºæ™¯ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘åˆå¹¶é¢‘çŽ‡ï¼Œæé«˜å†™å…¥æ€§èƒ½ã€‚&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šå¯èƒ½ä¼šäº§ç”Ÿè¾ƒå¤§çš„ç£ç›˜å ç”¨å’Œå»¶è¿Ÿï¼Œå› ä¸ºåˆå¹¶æ“ä½œæœ¬èº«è¾ƒå¤§ä¸”å¯èƒ½ä¸å¤Ÿé¢‘ç¹ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="leveled-compaction-å±‚çº§åŽ‹ç¼©">Leveled Compaction (å±‚çº§åŽ‹ç¼©)&lt;/h4>
&lt;ul>
&lt;li>åœ¨è¿™ç§ç­–ç•¥ä¸­ï¼ŒSSTables è¢«ç»„ç»‡æˆå¤šä¸ªå±‚çº§ã€‚æ¯ä¸ªå±‚çº§çš„å¤§å°æ˜¯ä¸Šä¸€å±‚çš„è‹¥å¹²å€ã€‚æ–°æ•°æ®é¦–å…ˆå†™å…¥æœ€ä½Žå±‚ï¼Œå½“è¿™ä¸€å±‚æ»¡äº†åŽï¼Œå®ƒä¼šä¸Žä¸‹ä¸€å±‚çš„ SSTables è¿›è¡Œåˆå¹¶ã€‚&lt;/li>
&lt;li>ä¼˜ç‚¹ï¼šæä¾›äº†æ›´ç¨³å®šçš„è¯»æ€§èƒ½å’Œç©ºé—´ä½¿ç”¨æ•ˆçŽ‡ï¼Œå› ä¸ºæ¯ä¸ªé”®çš„æ•°æ®ç‰ˆæœ¬åœ¨è¾ƒå°‘çš„æ–‡ä»¶ä¸­åˆ†æ•£ã€‚&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šåˆå¹¶æ“ä½œè¾ƒé¢‘ç¹ï¼Œå¯èƒ½ä¼šå¯¹å†™å…¥æ€§èƒ½äº§ç”Ÿå½±å“ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="bæ ‘">Bæ ‘&lt;/h3>
&lt;h3 id="é¢„å†™å¼æ—¥å¿—write-ahead-loggingç®€ç§°-wal">é¢„å†™å¼æ—¥å¿—ï¼ˆWrite-Ahead Loggingï¼Œç®€ç§° WALï¼‰&lt;/h3>
&lt;p>ä¸ºäº†ä½¿æ•°æ®åº“èƒ½å¤„ç†å¼‚å¸¸å´©æºƒçš„åœºæ™¯ï¼ŒB æ ‘å®žçŽ°é€šå¸¸ä¼šå¸¦æœ‰ä¸€ä¸ªé¢å¤–çš„ç¡¬ç›˜æ•°æ®ç»“æž„ï¼š&lt;strong>é¢„å†™å¼æ—¥å¿—&lt;/strong>ï¼ˆWALï¼Œå³ write-ahead logï¼Œä¹Ÿç§°ä¸º &lt;strong>é‡åšæ—¥å¿—&lt;/strong>ï¼Œå³ redo logï¼‰ã€‚&lt;/p>
&lt;p>WAL çš„åŸºæœ¬åŽŸç†æ˜¯ï¼Œåœ¨ä»»ä½•æ•°æ®æ›´æ”¹å†™å…¥åˆ°ä¸»æ•°æ®æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆå°†è¿™äº›æ›´æ”¹è®°å½•åˆ°ä¸€ä¸ªå•ç‹¬çš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;p>è¿™æ˜¯ä¸€ä¸ªä»…è¿½åŠ çš„æ–‡ä»¶ï¼Œæ¯ä¸ª B æ ‘çš„ä¿®æ”¹åœ¨å…¶èƒ½è¢«åº”ç”¨åˆ°æ ‘æœ¬èº«çš„é¡µé¢ä¹‹å‰éƒ½å¿…é¡»å…ˆå†™å…¥åˆ°è¯¥æ–‡ä»¶ã€‚å½“æ•°æ®åº“åœ¨å´©æºƒåŽæ¢å¤æ—¶ï¼Œè¿™&lt;/p>
&lt;p>ä¸ªæ—¥å¿—å°†è¢«ç”¨æ¥ä½¿ B æ ‘æ¢å¤åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚&lt;/p>
&lt;h3 id="bæ ‘-vs-lsm-æ ‘">Bæ ‘ VS LSM æ ‘&lt;/h3>
&lt;p>Bæ ‘å’ŒLSMæ ‘ï¼ˆLog-Structured Merge-treeï¼‰æ˜¯ä¸¤ç§å¸¸ç”¨çš„æ•°æ®ç»“æž„ï¼Œç”¨äºŽæ•°æ®åº“å’Œå­˜å‚¨ç³»ç»Ÿä¸­ç®¡ç†å’Œå­˜å‚¨å¤§é‡æ•°æ®ã€‚è™½ç„¶ä¸¤è€…éƒ½è¢«å¹¿æ³›åº”ç”¨ï¼Œä½†å®ƒä»¬çš„è®¾è®¡å“²å­¦ã€ç»“æž„å’Œé€‚ç”¨åœºæ™¯æœ‰ç€æ˜Žæ˜¾çš„å·®å¼‚ã€‚&lt;/p>
&lt;h4 id="bæ ‘çš„ç‰¹ç‚¹">Bæ ‘çš„ç‰¹ç‚¹&lt;/h4>
&lt;ol>
&lt;li>&lt;strong>ç»“æž„&lt;/strong>ï¼šBæ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„æ ‘ï¼Œå¯ä»¥ä¿æŒæ•°æ®åœ¨å¤šä¸ªå±‚çº§ä¸­å‡åŒ€åˆ†å¸ƒã€‚æ¯ä¸ªèŠ‚ç‚¹åŒ…å«å¤šä¸ªé”®å’ŒæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚Bæ ‘é€šè¿‡åˆ†è£‚å’Œåˆå¹¶èŠ‚ç‚¹æ¥ä¿æŒå¹³è¡¡ã€‚&lt;/li>
&lt;li>&lt;strong>è¯»å†™æ€§èƒ½&lt;/strong>ï¼šBæ ‘æä¾›äº†è¾ƒé«˜çš„è¯»å†™æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦é¢‘ç¹è¯»å†™ä¸”æ•°æ®é›†è¾ƒå°ï¼ˆå¯ä»¥éƒ¨åˆ†æˆ–å®Œå…¨æ”¾å…¥å†…å­˜ï¼‰çš„æƒ…å†µä¸‹ã€‚&lt;/li>
&lt;li>&lt;strong>æ•°æ®å­˜å–&lt;/strong>ï¼šåœ¨Bæ ‘ä¸­ï¼Œæ•°æ®å¯ä»¥ç›´æŽ¥åœ¨ä»»ä½•èŠ‚ç‚¹ä¸­è®¿é—®ï¼Œè¿™ä½¿å¾—ç‚¹æŸ¥æ‰¾éžå¸¸å¿«é€Ÿã€‚&lt;/li>
&lt;li>&lt;strong>é€‚ç”¨åœºæ™¯&lt;/strong>ï¼šå¹¿æ³›ç”¨äºŽä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“ä¸­ï¼Œå¦‚MySQLã€PostgreSQLç­‰ï¼Œé€‚åˆäº‹åŠ¡æ€§åº”ç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="lsmæ ‘çš„ç‰¹ç‚¹">LSMæ ‘çš„ç‰¹ç‚¹&lt;/h4>
&lt;ol>
&lt;li>&lt;strong>ç»“æž„&lt;/strong>ï¼šLSMæ ‘é€šè¿‡å°†æ‰€æœ‰å†™å…¥æ“ä½œé¦–å…ˆè®°å½•åœ¨å†…å­˜ä¸­çš„ç»“æž„ï¼ˆå¦‚MemTableï¼‰ï¼Œç„¶åŽå¼‚æ­¥æ‰¹é‡å†™å…¥ç£ç›˜ï¼Œä¼˜åŒ–äº†å†™å…¥æ€§èƒ½ã€‚&lt;/li>
&lt;li>&lt;strong>å†™å…¥ä¼˜åŒ–&lt;/strong>ï¼šLSMæ ‘ç‰¹åˆ«é€‚åˆå†™å¯†é›†åž‹åº”ç”¨ï¼Œå› ä¸ºå®ƒé€šè¿‡å‡å°‘å¯¹ç£ç›˜çš„å³æ—¶å†™å…¥ï¼Œå»¶è¿Ÿå¹¶æ‰¹é‡å¤„ç†è¿™äº›æ“ä½œæ¥ä¼˜åŒ–æ€§èƒ½ã€‚&lt;/li>
&lt;li>&lt;strong>åˆå¹¶å’ŒåŽ‹ç¼©&lt;/strong>ï¼šLSMæ ‘å®šæœŸåœ¨åŽå°è¿›è¡Œæ•°æ®æ–‡ä»¶çš„åˆå¹¶å’ŒåŽ‹ç¼©ï¼Œä»¥ä¿æŒé«˜æ•ˆçš„è¯»å–æ€§èƒ½ã€‚&lt;/li>
&lt;li>&lt;strong>é€‚ç”¨åœºæ™¯&lt;/strong>ï¼šå¸¸ç”¨äºŽNoSQLæ•°æ®åº“ç³»ç»Ÿï¼Œå¦‚Cassandraå’ŒRocksDBç­‰ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="bæ ‘ä¸Žlsmæ ‘çš„å¯¹æ¯”">Bæ ‘ä¸ŽLSMæ ‘çš„å¯¹æ¯”&lt;/h4>
&lt;ul>
&lt;li>&lt;strong>è¯»æ€§èƒ½&lt;/strong>ï¼šBæ ‘ç”±äºŽå…¶å¹³è¡¡çš„ç‰¹æ€§ï¼Œæä¾›äº†è¾ƒå¿«çš„è¯»è®¿é—®é€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽä½Žå»¶è¿Ÿçš„ç‚¹æŸ¥æ‰¾ã€‚LSMæ ‘å¯èƒ½åœ¨è¯»å–æ€§èƒ½ä¸Šä¸å¦‚Bæ ‘ï¼Œå°¤å…¶æ˜¯åœ¨å­˜åœ¨å¤§é‡SSTableæ—¶ã€‚&lt;/li>
&lt;li>&lt;strong>å†™æ€§èƒ½&lt;/strong>ï¼šLSMæ ‘åœ¨å†™æ€§èƒ½ä¸Šé€šå¸¸ä¼˜äºŽBæ ‘ï¼Œå› ä¸ºå®ƒé€šè¿‡æ‰¹é‡å†™å…¥å’ŒåŽå°å¤„ç†å‡å°‘äº†ç£ç›˜I/Oçš„éœ€æ±‚ã€‚&lt;/li>
&lt;li>&lt;strong>ç©ºé—´å’Œå†™å…¥æ”¾å¤§&lt;/strong>ï¼šLSMæ ‘åœ¨åˆå¹¶æ•°æ®æ—¶å¯èƒ½ä¼šäº§ç”Ÿè¾ƒå¤§çš„å†™å…¥æ”¾å¤§å’Œç©ºé—´å ç”¨ã€‚Bæ ‘é€šå¸¸å¯¹ç£ç›˜ç©ºé—´çš„åˆ©ç”¨æ›´ä¸ºé«˜æ•ˆã€‚&lt;/li>
&lt;li>&lt;strong>ç»´æŠ¤å¤æ‚æ€§&lt;/strong>ï¼šLSMæ ‘éœ€è¦å®šæœŸè¿›è¡ŒåŽ‹ç¼©å’Œåˆå¹¶æ“ä½œï¼Œè¿™å¢žåŠ äº†ç³»ç»Ÿçš„ç»´æŠ¤å¤æ‚æ€§ã€‚Bæ ‘çš„ç»´æŠ¤ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºå®ƒè‡ªåŠ¨é€šè¿‡èŠ‚ç‚¹åˆ†è£‚å’Œåˆå¹¶æ¥ä¿æŒå¹³è¡¡ã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>å†™å…¥æ”¾å¤§ï¼ˆwrite amplificationï¼‰&lt;/strong>ï¼šåœ¨æ•°æ®åº“çš„ç”Ÿå‘½å‘¨æœŸä¸­æ¯ç¬”æ•°æ®å¯¼è‡´å¯¹ç¡¬ç›˜çš„å¤šæ¬¡å†™å…¥&lt;/p>
&lt;/blockquote>
&lt;h3 id="äº‹åŠ¡å¤„ç†è¿˜æ˜¯åˆ†æž">äº‹åŠ¡å¤„ç†è¿˜æ˜¯åˆ†æž&lt;/h3>
&lt;p>&lt;strong>è¡¨ 3-1 æ¯”è¾ƒäº‹åŠ¡å¤„ç†å’Œåˆ†æžç³»ç»Ÿçš„ç‰¹ç‚¹&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">å±žæ€§&lt;/th>
&lt;th style="text-align:center">äº‹åŠ¡å¤„ç†ç³»ç»Ÿ OLTP&lt;/th>
&lt;th style="text-align:center">åˆ†æžç³»ç»Ÿ OLAP&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">ä¸»è¦è¯»å–æ¨¡å¼&lt;/td>
&lt;td style="text-align:center">æŸ¥è¯¢å°‘é‡è®°å½•ï¼ŒæŒ‰é”®è¯»å–&lt;/td>
&lt;td style="text-align:center">åœ¨å¤§æ‰¹é‡è®°å½•ä¸Šèšåˆ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">ä¸»è¦å†™å…¥æ¨¡å¼&lt;/td>
&lt;td style="text-align:center">éšæœºè®¿é—®ï¼Œå†™å…¥è¦æ±‚ä½Žå»¶æ—¶&lt;/td>
&lt;td style="text-align:center">æ‰¹é‡å¯¼å…¥ï¼ˆETLï¼‰æˆ–è€…äº‹ä»¶æµ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">ä¸»è¦ç”¨æˆ·&lt;/td>
&lt;td style="text-align:center">ç»ˆç«¯ç”¨æˆ·ï¼Œé€šè¿‡ Web åº”ç”¨&lt;/td>
&lt;td style="text-align:center">å†…éƒ¨æ•°æ®åˆ†æžå¸ˆï¼Œç”¨äºŽå†³ç­–æ”¯æŒ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">å¤„ç†çš„æ•°æ®&lt;/td>
&lt;td style="text-align:center">æ•°æ®çš„æœ€æ–°çŠ¶æ€ï¼ˆå½“å‰æ—¶é—´ç‚¹ï¼‰&lt;/td>
&lt;td style="text-align:center">éšæ—¶é—´æŽ¨ç§»çš„åŽ†å²äº‹ä»¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">æ•°æ®é›†å°ºå¯¸&lt;/td>
&lt;td style="text-align:center">GB ~ TB&lt;/td>
&lt;td style="text-align:center">TB ~ PB&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="-ch-4-ç¼–ç ä¸Žæ¼”åŒ–">ðŸ”„ CH 4 ç¼–ç ä¸Žæ¼”åŒ–&lt;/h2>
&lt;h3 id="å‘åŽä¸Žå‘å‰å…¼å®¹æ€§">å‘åŽä¸Žå‘å‰å…¼å®¹æ€§&lt;/h3>
&lt;p>&lt;strong>å‘åŽå…¼å®¹ï¼ˆBackward Compatibilityï¼‰&lt;/strong>&lt;/p>
&lt;p>å½“å‰ä»£ç å¯ä»¥è¯»å–ç”±æ—§ç‰ˆæœ¬ä»£ç å†™å…¥çš„æ•°æ®ã€‚&lt;/p>
&lt;p>&lt;strong>å‘å‰å…¼å®¹ï¼ˆForward Compatibilityï¼‰&lt;/strong>&lt;/p>
&lt;p>å½“å‰ä»£ç å¯ä»¥è¯»å–ç”±æ–°ç‰ˆæœ¬ä»£ç å†™å…¥çš„æ•°æ®ã€‚&lt;/p>
&lt;h3 id="æ–‡æœ¬ç¼–ç çš„ç¼ºç‚¹">æ–‡æœ¬ç¼–ç çš„ç¼ºç‚¹&lt;/h3>
&lt;p>&lt;strong>æ•°å€¼ç±»åž‹æ”¯æŒä¸è¶³&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CSV å’Œ XML&lt;/strong>ï¼šç›´æŽ¥ä¸æ”¯æŒæ•°å€¼ç±»åž‹ï¼Œä¸€åˆ‡éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚&lt;/li>
&lt;li>&lt;strong>JSON&lt;/strong>ï¼šè™½ç„¶åŒºåˆ†å­—ç¬¦ä¸²å’Œæ•°å€¼ï¼Œä½†ä¸ç»†åˆ†æ•°å€¼ç±»åž‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>äºŒè¿›åˆ¶æ•°æ®æ”¯æŒä¸è¶³&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒ Unicode ä½†å¯¹äºŒè¿›åˆ¶æ•°æ®æ”¯æŒä¸è¶³ï¼Œå¯èƒ½æ˜¾ç¤ºä¸ºä¹±ç ã€‚&lt;/li>
&lt;li>é€šå¸¸é€šè¿‡ Base64 ç¼–ç æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œä½†è¿™å¢žåŠ äº†å¤„ç†å¤æ‚åº¦ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>é¢å¤–çš„æ¨¡å¼æ”¯æŒ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>XML å’Œ JSON&lt;/strong>ï¼šæ”¯æŒé€šè¿‡æ¨¡å¼æ¥æè¿°æ•°æ®ç±»åž‹ï¼Œè™½ç„¶å¢žå¼ºäº†åŠŸèƒ½ï¼Œä½†ä¹Ÿå¢žåŠ äº†å¤æ‚åº¦ã€‚&lt;/li>
&lt;li>&lt;strong>CSV&lt;/strong>ï¼šæ²¡æœ‰ä»»ä½•æ¨¡å¼æ”¯æŒã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æ•°æ®æ¨¡å¼çš„ä¼˜ç‚¹">&lt;strong>æ•°æ®æ¨¡å¼çš„ä¼˜ç‚¹&lt;/strong>&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>çœåŽ»å­—æ®µå&lt;/strong>ï¼šæ•°æ®æ›´ç´§å‡‘ã€‚&lt;/li>
&lt;li>&lt;strong>ä½œä¸ºæ•°æ®çš„æ³¨é‡Šæˆ–æ–‡æ¡£&lt;/strong>ï¼šæ¨¡å¼æ€»æ˜¯ä¸Žæ•°æ®åŒæ­¥æ›´æ–°ã€‚&lt;/li>
&lt;li>&lt;strong>å…è®¸è¿›è¡Œæ¨¡å¼æ¯”å¯¹&lt;/strong>ï¼šå¯ä»¥ä¸è¯»å–æ•°æ®ï¼Œä»…é€šè¿‡æ¨¡å¼è¿›è¡Œå…¼å®¹æ€§æ£€æŸ¥ã€‚&lt;/li>
&lt;li>&lt;strong>é™æ€ç±»åž‹æ”¯æŒ&lt;/strong>ï¼šæ”¯æŒç¼–è¯‘æ—¶ç±»åž‹æ£€æŸ¥ï¼Œåˆ©äºŽé™æ€ç±»åž‹è¯­è¨€ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æ•°æ®æµæ¨¡åž‹">æ•°æ®æµæ¨¡åž‹&lt;/h3>
&lt;h4 id="rpcremote-procedure-call">RPCï¼ˆRemote Procedure Callï¼‰&lt;/h4>
&lt;p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€å°è®¡ç®—æœºä¸Šçš„è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œæ— éœ€å…³å¿ƒåº•å±‚ç½‘ç»œé€šä¿¡ç»†èŠ‚ã€‚&lt;/p>
&lt;h4 id="æ¶ˆæ¯é˜Ÿåˆ—">æ¶ˆæ¯é˜Ÿåˆ—&lt;/h4>
&lt;p>ç”¨äºŽå¼‚æ­¥å¤„ç†å’Œåˆ†å¸ƒå¼ç³»ç»Ÿé€šä¿¡çš„æŠ€æœ¯ï¼Œå…·æœ‰ä»¥ä¸‹é€è¾¾ä¿è¯ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æœ€å°‘ä¸€æ¬¡&lt;/strong>ï¼šå¯èƒ½é‡å¤é€è¾¾ã€‚&lt;/li>
&lt;li>&lt;strong>æœ€å¤šä¸€æ¬¡&lt;/strong>ï¼šå¯èƒ½ä¸¢å¤±ã€‚&lt;/li>
&lt;li>&lt;strong>ä¸¥æ ¼ä¸€æ¬¡&lt;/strong>ï¼šç¡®ä¿æ°å¥½é€è¾¾ä¸€æ¬¡ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="actor-æ¨¡åž‹">Actor æ¨¡åž‹&lt;/h4>
&lt;p>ä¸€ç§å¹¶å‘è®¡ç®—æ¨¡åž‹ï¼Œæ—¨åœ¨ç®€åŒ–å¹¶è¡Œè®¡ç®—å’Œé€šä¿¡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç‹¬ç«‹æ€§&lt;/strong>ï¼šActorä¹‹é—´ä¸å…±äº«å†…å­˜ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’äº¤äº’ã€‚&lt;/li>
&lt;li>&lt;strong>å¹¶è¡Œæ€§&lt;/strong>ï¼šæ”¯æŒå¹¶å‘æ‰§è¡Œï¼Œé€‚ç”¨äºŽåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¤šæ ¸çŽ¯å¢ƒã€‚&lt;/li>
&lt;li>&lt;strong>éš”ç¦»æ€§å’Œå¯æ‰©å±•æ€§&lt;/strong>ï¼šActoræ•…éšœäº’ä¸å½±å“ï¼Œæ˜“äºŽæ‰©å±•ç³»ç»Ÿã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="-part-2-åˆ†å¸ƒå¼æ•°æ®">ðŸŒ Part 2 åˆ†å¸ƒå¼æ•°æ®&lt;/h1>
&lt;blockquote>
&lt;p>å¤åˆ¶ï¼ˆReplicationï¼‰&lt;/p>
&lt;p>åœ¨å‡ ä¸ªä¸åŒçš„èŠ‚ç‚¹ä¸Šä¿å­˜æ•°æ®çš„ç›¸åŒå‰¯æœ¬ï¼Œå¯èƒ½æ”¾åœ¨ä¸åŒçš„ä½ç½®ã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>åˆ†åŒºï¼ˆPartitioningï¼‰&lt;/p>
&lt;p>å°†ä¸€ä¸ªå¤§åž‹æ•°æ®åº“æ‹†åˆ†æˆè¾ƒå°çš„å­é›†ï¼ˆç§°ä¸ºåˆ†åŒºï¼ˆpartitionsï¼‰ï¼‰ï¼Œä»Žè€Œä¸åŒçš„åˆ†åŒºå¯ä»¥æŒ‡æ´¾ ç»™ä¸åŒçš„èŠ‚ç‚¹ï¼ˆnodeï¼‰ï¼ˆäº¦ç§°åˆ†ç‰‡ï¼ˆshardï¼‰ï¼‰&lt;/p>
&lt;/blockquote>
&lt;h2 id="-ch5-å¤åˆ¶">ðŸ”€ CH5 å¤åˆ¶&lt;/h2>
&lt;p>å…³é”®ï¼šå¦‚ä½•å¤„ç†å¤åˆ¶æ•°æ®çš„å˜æ›´&lt;/p>
&lt;h3 id="ä¸»ä»Žå¤åˆ¶æ¨¡å¼">ä¸»ä»Žå¤åˆ¶æ¨¡å¼&lt;/h3>
&lt;ul>
&lt;li>å®¢æˆ·ç«¯è¦å‘æ•°æ®åº“å†™å…¥æ—¶ï¼Œå¿…é¡»å°†è¯·æ±‚å‘é€ç»™ leader ï¼Œleader ä¼šå°†æ–°æ•°æ®å†™å…¥å…¶æœ¬åœ°å­˜å‚¨&lt;/li>
&lt;li>leader å°†æ–°æ•°æ®å†™å…¥æœ¬åœ°åŽï¼Œä¹Ÿä¼šå°†æ•°æ®å˜æ›´å‘é€ç»™æ‰€æœ‰çš„ followers å¤åˆ¶æ—¥å¿—ï¼ˆreplication logï¼‰æ¯ä¸ª followers ä»Žleader æ‹‰å–æ—¥å¿—åŽæ›´æ–°ç›¸åº”çš„æœ¬åœ°æ•°æ®åº“å‰¯æœ¬ã€‚&lt;/li>
&lt;li>åªæœ‰ leader å¯å†™ï¼Œfollowers éƒ½æ˜¯åªè¯»çš„&lt;/li>
&lt;/ul>
&lt;h4 id="åŒæ­¥å¤åˆ¶å¼‚æ­¥å¤åˆ¶">åŒæ­¥å¤åˆ¶&amp;amp;å¼‚æ­¥å¤åˆ¶&lt;/h4>
&lt;p>åŒæ­¥å¤åˆ¶&lt;/p>
&lt;ul>
&lt;li>ä¼˜ç‚¹ï¼šä»Žåº“ä¿è¯æœ‰ä¸Žä¸»åº“ä¸€è‡´çš„æœ€æ–°æ•°æ®å‰¯æœ¬ã€‚å¦‚æžœä¸»åº“çªç„¶å¤±æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿¡è¿™äº›æ•°æ®ä»ç„¶èƒ½åœ¨ä»Žåº“ä¸Šæ‰¾åˆ°ã€‚&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šå¦‚æžœåŒæ­¥ä»Žåº“æ²¡æœ‰å“åº”ï¼ˆæ¯”å¦‚å®ƒå·²ç»å´©æºƒï¼Œæˆ–è€…å‡ºçŽ°ç½‘ç»œæ•…éšœï¼Œæˆ–å…¶å®ƒä»»ä½•åŽŸå› ï¼‰ï¼Œä¸»åº“å°±æ— æ³•å¤„ç†å†™å…¥æ“ä½œã€‚ä¸»åº“å¿…é¡»é˜»æ­¢æ‰€æœ‰å†™å…¥ï¼Œå¹¶ç­‰å¾…åŒæ­¥å‰¯æœ¬å†æ¬¡å¯ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;p>åŠåŒæ­¥&lt;/p>
&lt;p>å¦‚æžœåŒæ­¥ä»Žåº“å˜å¾—ä¸å¯ç”¨æˆ–ç¼“æ…¢ï¼Œåˆ™ä½¿ä¸€ä¸ªå¼‚æ­¥ä»Žåº“åŒæ­¥ã€‚è¿™ä¿è¯ä½ è‡³å°‘åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šæ‹¥æœ‰æœ€æ–°çš„æ•°æ®å‰¯æœ¬ï¼šä¸»åº“å’ŒåŒæ­¥ä»Žåº“&lt;/p>
&lt;h4 id="è®¾ç½®æ–°ä»Žåº“æ­¥éª¤">è®¾ç½®æ–°ä»Žåº“æ­¥éª¤&lt;/h4>
&lt;ol>
&lt;li>èŽ·å–æŸä¸ªæ—¶åˆ»çš„ä¸»åº“çš„ä¸€è‡´æ€§å¿«ç…§&lt;/li>
&lt;li>å°†å¿«ç…§å¤åˆ¶åˆ°æ–°çš„ä»Žåº“èŠ‚ç‚¹&lt;/li>
&lt;li>ä»Žåº“è¿žæŽ¥åˆ°ä¸»åº“ï¼Œå¹¶æ‹‰å–å¿«ç…§ä¹‹åŽçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚&lt;/li>
&lt;li>ä»Žåº“å¤„ç†å®Œæ•°æ®å˜æ›´åŽå°± catch up äº†ä¸»åº“&lt;/li>
&lt;/ol>
&lt;h4 id="ä¸»åº“å¤±æ•ˆæ•…éšœåˆ‡æ¢">ä¸»åº“å¤±æ•ˆã€æ•…éšœåˆ‡æ¢&lt;/h4>
&lt;blockquote>
&lt;p>&lt;strong>æ•…éšœåˆ‡æ¢ï¼ˆFailoverï¼‰&lt;/strong>ï¼šå½“ä¸»åº“å¤±æ•ˆæ—¶ï¼Œä¸€ä¸ªä»Žåº“è¢«æå‡ä¸ºæ–°çš„ä¸»åº“ï¼Œå®¢æˆ·ç«¯å’Œå…¶ä»–ä»Žåº“éœ€è¦é‡æ–°é…ç½®ä»¥æŒ‡å‘æ–°çš„ä¸»åº“ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>æ•…éšœåˆ‡æ¢çš„è¿‡ç¨‹&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>ç¡®è®¤ä¸»åº“å¤±æ•ˆ&lt;/strong>ï¼šé€šå¸¸é€šè¿‡è¶…æ—¶æœºåˆ¶åˆ¤æ–­ï¼Œå¦‚æžœèŠ‚ç‚¹åœ¨è®¾å®šæ—¶é—´å†…æ— å“åº”ï¼Œåˆ™å‡å®šå…¶å¤±æ•ˆã€‚&lt;/li>
&lt;li>&lt;strong>é€‰æ‹©æ–°ä¸»åº“&lt;/strong>ï¼šå¯ä»¥é€šè¿‡é€‰ä¸¾è¿‡ç¨‹æˆ–ç”±æŽ§åˆ¶å™¨èŠ‚ç‚¹æŒ‡å®šï¼Œæœ€ä½³äººé€‰æ˜¯æ‹¥æœ‰æœ€æ–°æ•°æ®å‰¯æœ¬çš„ä»Žåº“ã€‚&lt;/li>
&lt;li>&lt;strong>ç³»ç»Ÿé‡æ–°é…ç½®&lt;/strong>ï¼šå®¢æˆ·ç«¯çš„å†™è¯·æ±‚éœ€è¦æŒ‡å‘æ–°çš„ä¸»åº“ï¼Œè€ä¸»åº“éœ€è®¤å¯æ–°é¢†å¯¼å¹¶æˆä¸ºä»Žåº“ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>æ•…éšœåˆ‡æ¢çš„æŒ‘æˆ˜&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ•°æ®ä¸€è‡´æ€§é—®é¢˜&lt;/strong>ï¼šå¼‚æ­¥å¤åˆ¶å¯èƒ½å¯¼è‡´æ–°ä¸»åº“ç¼ºå°‘è€ä¸»åº“å®•æœºå‰çš„å†™å…¥æ“ä½œã€‚&lt;/li>
&lt;li>&lt;strong>å†²çªå¤„ç†&lt;/strong>ï¼šè€ä¸»åº“é‡æ–°åŠ å…¥é›†ç¾¤æ—¶ï¼Œå¯èƒ½ä¸Žæ–°ä¸»åº“å­˜åœ¨å†™å…¥å†²çªï¼Œå¸¸è§è§£å†³æ–¹æ¡ˆæ˜¯ä¸¢å¼ƒè€ä¸»åº“æœªå¤åˆ¶çš„å†™å…¥ã€‚&lt;/li>
&lt;li>&lt;strong>å¤–éƒ¨å­˜å‚¨åè°ƒ&lt;/strong>ï¼šä¸Žå¤–éƒ¨å­˜å‚¨ç³»ç»Ÿåè°ƒæ—¶ï¼Œä¸¢å¼ƒå†™å…¥å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚&lt;/li>
&lt;li>&lt;strong>è„‘è£‚ï¼ˆSplit Brainï¼‰&lt;/strong>ï¼šä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶è®¤ä¸ºè‡ªå·±æ˜¯ä¸»åº“ï¼Œè‹¥æ— å†²çªè§£å†³æœºåˆ¶ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŸåã€‚&lt;/li>
&lt;li>&lt;strong>å±è”½æœºåˆ¶ï¼ˆFencingï¼‰&lt;/strong>ï¼šé‡‡å–æŽªæ–½é˜²æ­¢è„‘è£‚ï¼Œå¦‚å…³é—­é”™è¯¯çš„ä¸»åº“èŠ‚ç‚¹ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ•…éšœåˆ‡æ¢çš„é…ç½®&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è¶…æ—¶è®¾ç½®&lt;/strong>ï¼šè¶…æ—¶æ—¶é—´éœ€æƒè¡¡ï¼Œå¤ªé•¿å¯èƒ½å¯¼è‡´æ¢å¤å»¶è¿Ÿï¼Œå¤ªçŸ­å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ•…éšœåˆ‡æ¢ã€‚&lt;/li>
&lt;li>&lt;strong>æ‰‹åŠ¨ä¸Žè‡ªåŠ¨åˆ‡æ¢&lt;/strong>ï¼šå°½ç®¡è½¯ä»¶å¯èƒ½æ”¯æŒè‡ªåŠ¨æ•…éšœåˆ‡æ¢ï¼Œä½†è®¸å¤šè¿ç»´å›¢é˜Ÿæ›´å€¾å‘äºŽæ‰‹åŠ¨æ‰§è¡Œä»¥é¿å…æ½œåœ¨é—®é¢˜ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="æ—¥å¿—å¤åˆ¶">æ—¥å¿—å¤åˆ¶&lt;/h4>
&lt;h5 id="é€»è¾‘æ—¥å¿—å¤åˆ¶">&lt;strong>é€»è¾‘æ—¥å¿—å¤åˆ¶&lt;/strong>&lt;/h5>
&lt;ul>
&lt;li>é€šå¸¸æ˜¯ä»¥è¡Œçš„ç²’åº¦æè¿°å¯¹æ•°æ®åº“è¡¨çš„å†™å…¥çš„è®°å½•åºåˆ—&lt;/li>
&lt;li>å¯¹äºŽæ’å…¥çš„è¡Œï¼Œæ—¥å¿—åŒ…å«æ‰€æœ‰åˆ—çš„æ–°å€¼&lt;/li>
&lt;li>å¯¹äºŽåˆ é™¤çš„è¡Œï¼Œæ—¥å¿—åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥å”¯ä¸€æ ‡è¯†åˆ é™¤çš„è¡Œ&lt;/li>
&lt;li>å¯¹äºŽæ›´æ–°çš„è¡Œï¼Œæ—¥å¿—åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥å”¯ä¸€æ ‡è¯†æ›´æ–°çš„è¡ŒåŠæ‰€æœ‰æ–°åˆ—çš„å€¼&lt;/li>
&lt;/ul>
&lt;h5 id="å¤åˆ¶å»¶è¿Ÿé—®é¢˜">&lt;strong>å¤åˆ¶å»¶è¿Ÿé—®é¢˜&lt;/strong>&lt;/h5>
&lt;p>&lt;strong>read-your-writes consistency&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>åœ¨ä¸€ä¸ª&lt;strong>å¼‚æ­¥å¤åˆ¶&lt;/strong>çš„åˆ†å¸ƒå¼æ•°æ®åº“é‡Œï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå†™å…¥&lt;strong>ä¸»å‰¯æœ¬&lt;/strong>åŽè¿”å›žï¼›ç¨åŽå†åŽ»è¯»ä¸€ä¸ªè½åŽçš„&lt;strong>ä»Žå‰¯æœ¬&lt;/strong>ï¼Œå‘çŽ°è¯»ä¸åˆ°è‡ªå·±åˆšå†™çš„å†…å®¹&lt;/p>
&lt;/blockquote>
&lt;p>è§£å†³æ–¹å¼&lt;/p>
&lt;ul>
&lt;li>å†…å®¹ç»´åº¦ï¼šè¯»å–çš„æ˜¯ç”¨æˆ·è‡ªèº«çš„å¼ºç›¸å…³çš„åªæœ‰ç”¨æˆ·è‡ªå·±èƒ½è¯»å–åˆ°çš„å†…å®¹æ—¶ä»Žä¸»åº“è¯»ï¼Œå…¶ä½™çš„ä»Žä»Žåº“è¯»&lt;/li>
&lt;li>æ—¶é—´ç»´åº¦ï¼šè¯»å–çš„å†…å®¹çš„æ›´æ–°æ—¶é—´é—´éš”è¾ƒçŸ­åˆ™ä»Žä¸»åº“è¯»ã€‚å¯ä»¥æ ¹æ®ä¸»ä»Žå¤åˆ¶å»¶è¿Ÿå†³å®šè¿™ä¸ªæ—¶é—´&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>moving backward in time&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>æŸ¥è¯¢ä¸€ä¸ªå»¶è¿Ÿä½Žçš„ä»Žåº“æœ‰æ•°æ®ï¼Œç„¶åŽå†åŽ»æŸ¥è¯¢ä¸€ä¸ªå»¶è¿Ÿé«˜çš„ä»Žåº“å´æ²¡æ•°æ®ã€‚ä»¿ä½›æ—¶å…‰å€’æµï¼Œæ— äº‹å‘ç”Ÿä¸€æ ·&lt;/p>
&lt;/blockquote>
&lt;p>è§£å†³æ–¹å¼&lt;/p>
&lt;ul>
&lt;li>å•è°ƒè¯»å–ï¼šç¡®ä¿æ¯ä¸ªç”¨æˆ·éƒ½ä»ŽåŒä¸€ä»½å‰¯æœ¬ä¸Šè¯»å–&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å› æžœå…³ç³»å†…å®¹è¯»å–é¡ºåºé¢ å€’&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>å†…å®¹çš„é¡ºåºæ˜¯å…ˆA -&amp;gt; B, ä½†ç”±äºŽæŸäº›åˆ†åŒºçš„å¤åˆ¶é€Ÿåº¦æ…¢äºŽå…¶ä»–åˆ†åŒºï¼Œå¾—åˆ°çš„å†…å®¹é¡ºåºå´æ˜¯ B-&amp;gt;A&lt;/p>
&lt;/blockquote>
&lt;p>è§£å†³æ–¹å¼&lt;/p>
&lt;ul>
&lt;li>ç¡®ä¿ä»»ä½•å› æžœç›¸å…³çš„å†™å…¥éƒ½å†™å…¥ç›¸åŒçš„åˆ†åŒº&lt;/li>
&lt;/ul>
&lt;h3 id="å¤šä¸»å¤åˆ¶æ¨¡å¼">å¤šä¸»å¤åˆ¶æ¨¡å¼&lt;/h3>
&lt;blockquote>
&lt;p>å†™å…¥çš„ä¸»åº“å¯ä»¥æ˜¯å¤šä¸ªï¼ŒæŸä¸ªä¸»åº“åŒæ—¶ä¹Ÿæ˜¯å…¶ä»–ä¸»åº“çš„ follow&lt;/p>
&lt;/blockquote>
&lt;h4 id="é€‚ç”¨åœºæ™¯">é€‚ç”¨åœºæ™¯&lt;/h4>
&lt;p>å¤šä¸ªæ•°æ®ä¸­å¿ƒï¼Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒæœ‰è‡ªå·±çš„ä¸»åº“&lt;/p>
&lt;ul>
&lt;li>é™ä½Žå†™å…¥çš„å»¶è¿Ÿï¼Œæå‡æ€§èƒ½ä½“éªŒ&lt;/li>
&lt;li>èƒ½å¤Ÿå®¹å¿æŸä¸ªæ•°æ®ä¸­å¿ƒåœæœº&lt;/li>
&lt;li>é‡‡ç”¨å¼‚æ­¥å¤åˆ¶çš„å¤šæ´»é…ç½®èƒ½æ›´å¥½åœ°æ‰¿å—ç½‘ç»œé—®é¢˜&lt;/li>
&lt;/ul>
&lt;h4 id="ç¼ºç‚¹">ç¼ºç‚¹&lt;/h4>
&lt;ul>
&lt;li>ä¸¤ä¸ªä¸åŒçš„æ•°æ®ä¸­å¿ƒå¯èƒ½åŒæ—¶ä¿®æ”¹æ•°æ®ï¼Œå­˜åœ¨å†™å…¥å†²çª&lt;/li>
&lt;li>å¤šä¸»å¤åˆ¶å®¹æ˜“æœ‰é…ç½®ç¼ºé™·ï¼Œå¦‚è‡ªå¢žä¸»é”®ï¼Œè§¦å‘å™¨ï¼Œå®Œæ•´æ€§çº¦æŸ&lt;/li>
&lt;/ul>
&lt;h4 id="å¦‚ä½•å¤„ç†å†™å…¥å†²çª">å¦‚ä½•å¤„ç†å†™å…¥å†²çª&lt;/h4>
&lt;ul>
&lt;li>é€šè¿‡åº”ç”¨ç¨‹åºé€»è¾‘æ¥é¿å…å†²çªï¼Œä¾‹å¦‚ç¡®ä¿ç›¸åŒçš„æ•°æ®ä¸ä¼šè¢«å¤šä¸ªèŠ‚ç‚¹åŒæ—¶ä¿®æ”¹ã€‚&lt;/li>
&lt;li>æœ€åŽå†™å…¥èƒœå‡ºï¼ˆLast Write Wins, LWWï¼‰ï¼šå³æœ€æ–°çš„å†™å…¥æ“ä½œä¼šè¦†ç›–æ—§çš„å†™å…¥ã€‚&lt;/li>
&lt;li>CRDTsï¼ˆConflict-free Replicated Data Typesï¼‰ï¼šä½¿ç”¨ç‰¹æ®Šçš„æ•°æ®ç»“æž„ï¼Œå®ƒä»¬å¤©ç„¶æ”¯æŒå¤åˆ¶å¹¶åœ¨æ²¡æœ‰ä¸­å¿ƒåè°ƒè€…çš„æƒ…å†µä¸‹è§£å†³å†²çªã€‚&lt;/li>
&lt;li>ç‰ˆæœ¬å‘é‡ï¼ˆVector Clocksï¼‰ï¼šä½¿ç”¨å‘é‡æ—¶é’Ÿæ¥è·Ÿè¸ªæ¯ä¸ªå‰¯æœ¬çš„å†™å…¥æ“ä½œï¼Œè§£å†³å†²çªæ—¶å¯ä»¥æ ¹æ®å‘é‡æ—¶é’Ÿç¡®å®šå“ªä¸ªå†™å…¥æ˜¯â€œæœ€æ–°â€çš„ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æ— ä¸»å¤åˆ¶æ¨¡å¼">æ— ä¸»å¤åˆ¶æ¨¡å¼&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>åŽ»ä¸­å¿ƒåŒ–&lt;/strong>ï¼šæ²¡æœ‰å•ä¸€çš„æŽ§åˆ¶èŠ‚ç‚¹ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„ï¼Œå¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ•°æ®å¤åˆ¶å’ŒåŒæ­¥ã€‚&lt;/li>
&lt;li>&lt;strong>æ•°æ®ä¸€è‡´æ€§&lt;/strong>ï¼šè™½ç„¶æ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹æ“ä½œï¼Œä½†ç³»ç»Ÿè®¾è®¡éœ€è¦ç¡®ä¿æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿™é€šå¸¸é€šè¿‡ç‰ˆæœ¬æŽ§åˆ¶ã€å‘é‡æ—¶é’Ÿç­‰æœºåˆ¶æ¥å®žçŽ°ã€‚&lt;/li>
&lt;li>&lt;strong>å®¹é”™æ€§&lt;/strong>ï¼šç”±äºŽæ²¡æœ‰å•ä¸€çš„æ•…éšœç‚¹ï¼Œç³»ç»Ÿå¯¹èŠ‚ç‚¹æ•…éšœå…·æœ‰æ›´å¥½çš„å®¹é”™æ€§ã€‚å³ä½¿æŸäº›èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå…¶ä»–èŠ‚ç‚¹ä»ç„¶å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ã€‚&lt;/li>
&lt;li>&lt;strong>å¯æ‰©å±•æ€§&lt;/strong>ï¼šæ–°èŠ‚ç‚¹å¯ä»¥è½»æ¾åŠ å…¥ç½‘ç»œï¼Œè€Œä¸éœ€è¦é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹ã€‚è¿™ä½¿å¾—ç³»ç»Ÿå¯ä»¥çµæ´»åœ°æ‰©å±•ã€‚&lt;/li>
&lt;li>&lt;strong>å†²çªè§£å†³&lt;/strong>ï¼šåœ¨æ— ä¸»å¤åˆ¶æ¨¡å¼ä¸­ï¼Œæ•°æ®å†²çªæ˜¯ä¸å¯é¿å…çš„ã€‚ç³»ç»Ÿéœ€è¦æœ‰ä¸€å¥—æœºåˆ¶æ¥è§£å†³å†²çªï¼Œæ¯”å¦‚æœ€åŽå†™å…¥èƒœå‡ºï¼ˆLast Write Wins, LWWï¼‰æˆ–è€…æ›´å¤æ‚çš„å†²çªè§£å†³ç®—æ³•ã€‚&lt;/li>
&lt;li>&lt;strong>ç½‘ç»œåˆ†åŒºå®¹å¿æ€§&lt;/strong>ï¼šæ— ä¸»å¤åˆ¶æ¨¡å¼é€šå¸¸ä¸Žä¸€äº›ç½‘ç»œåˆ†åŒºå®¹å¿æ€§åè®®ï¼ˆå¦‚Raftæˆ–Paxosï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥ç¡®ä¿å³ä½¿åœ¨ç½‘ç»œåˆ†åŒºçš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="è¯»ä¿®å¤read-repair">è¯»ä¿®å¤ï¼ˆRead Repairï¼‰&lt;/h4>
&lt;p>è¯»ä¿®å¤æ˜¯ä¸€ç§åœ¨è¯»å–æ•°æ®è¿‡ç¨‹ä¸­åŠ¨æ€è¿›è¡Œæ•°æ®ä¿®å¤çš„ç­–ç•¥ã€‚å½“å®¢æˆ·ç«¯ä»Žåˆ†å¸ƒå¼æ•°æ®åº“æˆ–å­˜å‚¨ç³»ç»Ÿè¯·æ±‚æ•°æ®æ—¶ï¼Œç³»ç»Ÿå¯èƒ½ä»Žå¤šä¸ªå‰¯æœ¬ä¸­èŽ·å–æ•°æ®ï¼Œä»¥ä¿è¯è¯»å–æ“ä½œçš„é«˜å¯ç”¨æ€§å’Œå¿«é€Ÿå“åº”ã€‚è¯»ä¿®å¤çš„å·¥ä½œæµç¨‹é€šå¸¸å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ•°æ®è¯»å–&lt;/strong>ï¼šå®¢æˆ·ç«¯è¯·æ±‚æ•°æ®æ—¶ï¼Œç³»ç»Ÿä»Žå¤šä¸ªæ•°æ®å‰¯æœ¬ä¸­è¯»å–åŒä¸€æ•°æ®é¡¹ã€‚&lt;/li>
&lt;li>&lt;strong>ç‰ˆæœ¬æ¯”è¾ƒ&lt;/strong>ï¼šç³»ç»Ÿæ¯”è¾ƒå„å‰¯æœ¬çš„æ•°æ®ç‰ˆæœ¬æˆ–æ—¶é—´æˆ³ã€‚&lt;/li>
&lt;li>&lt;strong>æ£€æµ‹ä¸ä¸€è‡´&lt;/strong>ï¼šå¦‚æžœå‘çŽ°å‰¯æœ¬ä¹‹é—´å­˜åœ¨ç‰ˆæœ¬å·®å¼‚ï¼Œè¯´æ˜Žæ•°æ®ä¸ä¸€è‡´ã€‚&lt;/li>
&lt;li>&lt;strong>ä¿®å¤æ•°æ®&lt;/strong>ï¼šç³»ç»Ÿè‡ªåŠ¨å°†æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®å†™å›žæ—§ç‰ˆæœ¬çš„å‰¯æœ¬ä¸­ï¼Œæ›´æ–°è¿™äº›å‰¯æœ¬ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¯»ä¿®å¤æ˜¯ä¸€ç§æ‡’æƒ°ä¿®å¤ç­–ç•¥ï¼Œå› ä¸ºå®ƒä»…åœ¨è¯»å–æ“ä½œå‘ç”Ÿæ—¶æ‰è¿›è¡Œæ•°æ®ä¿®å¤ï¼Œå¯ä»¥é™ä½Žç½‘ç»œå’Œå­˜å‚¨çš„åŽ‹åŠ›ï¼Œä½†å¯èƒ½å¯¼è‡´è¿‡æ—¶æ•°æ®åœ¨æœªè¢«è®¿é—®æ—¶é•¿æ—¶é—´å­˜åœ¨ã€‚&lt;/p>
&lt;h4 id="åç†µè¿‡ç¨‹anti-entropy-process">åç†µè¿‡ç¨‹ï¼ˆAnti-entropy Processï¼‰&lt;/h4>
&lt;p>åç†µè¿‡ç¨‹æ˜¯ä¸€ç§æ›´åŠ ç§¯æžçš„æ•°æ®ä¸€è‡´æ€§ç»´æŠ¤ç­–ç•¥ï¼Œç”¨äºŽç³»ç»Ÿåœ°è¯†åˆ«å’Œä¿®æ­£æ•°æ®å‰¯æœ¬é—´çš„ä¸ä¸€è‡´ã€‚å®ƒä¸ä¾èµ–äºŽç”¨æˆ·çš„è¯»å–æ“ä½œï¼Œè€Œæ˜¯å‘¨æœŸæ€§åœ°åœ¨åŽå°è¿è¡Œï¼Œæ‰«æå¹¶åŒæ­¥æ•°æ®å‰¯æœ¬ã€‚åç†µè¿‡ç¨‹ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å®žçŽ°æ–¹å¼ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Merkleæ ‘åŒæ­¥&lt;/strong>ï¼šä½¿ç”¨Merkleæ ‘ï¼ˆä¸€ç§å“ˆå¸Œæ ‘ï¼‰æ¥æ¯”è¾ƒæ•°æ®å‰¯æœ¬çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚Merkleæ ‘å¯ä»¥æœ‰æ•ˆåœ°å®šä½åˆ°ä¸ä¸€è‡´çš„æ•°æ®å—ï¼Œä»Žè€Œå‡å°‘æ•°æ®åŒæ­¥è¿‡ç¨‹ä¸­éœ€è¦ä¼ è¾“çš„æ•°æ®é‡ã€‚&lt;/li>
&lt;li>&lt;strong>ç‰ˆæœ¬å‘é‡&lt;/strong>ï¼šé€šè¿‡ç»´æŠ¤ä¸€ä¸ªåŒ…å«æ‰€æœ‰å‰¯æœ¬ç‰ˆæœ¬ä¿¡æ¯çš„å‘é‡ï¼Œç³»ç»Ÿå¯ä»¥è¯†åˆ«å¹¶åŒæ­¥é‚£äº›è¿‡æ—¶çš„å‰¯æœ¬ã€‚&lt;/li>
&lt;li>&lt;strong>å…¨é‡æˆ–å¢žé‡åŒæ­¥&lt;/strong>ï¼šå®šæœŸè¿›è¡Œå…¨å‰¯æœ¬ä¹‹é—´çš„æ•°æ®æ¯”å¯¹å’ŒåŒæ­¥ï¼Œæˆ–è€…ä»…åŒæ­¥è‡ªä¸Šæ¬¡åŒæ­¥ä»¥æ¥å‘ç”Ÿå˜åŒ–çš„æ•°æ®éƒ¨åˆ†ã€‚&lt;/li>
&lt;/ol>
&lt;p>åç†µè¿‡ç¨‹æ›´åŠ é€‚åˆäºŽé‚£äº›å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œèƒ½å¤Ÿç¡®ä¿å³ä½¿åœ¨æ²¡æœ‰è¯»å–æ“ä½œçš„æƒ…å†µä¸‹ï¼Œæ•°æ®å‰¯æœ¬ä¹Ÿèƒ½ä¿æŒä¸€è‡´ã€‚&lt;/p>
&lt;h4 id="è¯»å†™çš„æ³•å®šäººæ•°quorum">è¯»å†™çš„æ³•å®šäººæ•°ï¼ˆQuorumï¼‰&lt;/h4>
&lt;p>åœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œæ˜¯ä¸€ç§ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„å¸¸è§ç­–ç•¥ã€‚æ³•å®šäººæ•°æ˜¯åŸºäºŽå¤šæ•°æŠ•ç¥¨çš„æ¦‚å¿µï¼Œç”¨äºŽå†³å®šåœ¨è¯»å–å’Œå†™å…¥æ“ä½œä¸­å¿…é¡»å‚ä¸Žçš„èŠ‚ç‚¹çš„æœ€å°æ•°é‡ã€‚è¿™ç§ç­–ç•¥æ˜¯å¤„ç†å¤åˆ¶æ•°æ®æ—¶ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´æƒè¡¡çš„ä¸€ç§æ–¹æ³•ã€‚&lt;/p>
&lt;p>&lt;strong>åŸºæœ¬æ¦‚å¿µ&lt;/strong>&lt;/p>
&lt;p>æ³•å®šäººæ•°çš„è®¡ç®—é€šå¸¸åŸºäºŽä»¥ä¸‹å…¬å¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å†™æ³•å®šäººæ•° (W)&lt;/strong>ï¼šå¿…é¡»æˆåŠŸå†™å…¥çš„æœ€å°å‰¯æœ¬æ•°ã€‚&lt;/li>
&lt;li>&lt;strong>è¯»æ³•å®šäººæ•° (R)&lt;/strong>ï¼šå¿…é¡»æˆåŠŸè¯»å–çš„æœ€å°å‰¯æœ¬æ•°ã€‚&lt;/li>
&lt;li>&lt;strong>N&lt;/strong>ï¼šæ€»çš„å‰¯æœ¬æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†ä¿è¯åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½è¯»å–åˆ°æœ€æ–°å†™å…¥çš„æ•°æ®ï¼Œæ³•å®šäººæ•°éœ€è¦æ»¡è¶³ä»¥ä¸‹å…³ç³»ï¼š&lt;/p>
&lt;p>R+W&amp;gt;N&lt;/p>
&lt;p>è¿™ä¸ªå…³ç³»ç¡®ä¿äº†è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨è¯»å’Œå†™æ“ä½œä¸­åŒæ—¶è¢«è®¿é—®ï¼Œä»Žè€Œèƒ½èŽ·å–åˆ°æœ€æ–°çš„æ•°æ®ã€‚&lt;/p>
&lt;p>æ³•å®šäººæ•°ç­–ç•¥çš„é€‰æ‹©&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¼ºä¸€è‡´æ€§&lt;/p>
&lt;p>ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æžœç³»ç»Ÿè¦æ±‚éžå¸¸å¼ºçš„æ•°æ®ä¸€è‡´æ€§ï¼Œå¯ä»¥é€‰æ‹©è¾ƒé«˜çš„è¯»å†™æ³•å®šäººæ•°ï¼Œä¾‹å¦‚ W=Nå’Œ R=1æˆ– W=Nå’Œ R=Nã€‚è¿™ç¡®ä¿æ‰€æœ‰å‰¯æœ¬åœ¨æ¯æ¬¡å†™å…¥åŽéƒ½æ˜¯æœ€æ–°çš„ï¼Œä¸”æ¯æ¬¡è¯»å–éƒ½èƒ½è¿”å›žæœ€æ–°æ•°æ®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é«˜å¯ç”¨æ€§&lt;/p>
&lt;p>ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æžœç³»ç»Ÿæ›´é‡è§†å¯ç”¨æ€§ï¼Œå¯èƒ½é€‰æ‹© W=1 å’Œ R=Nï¼Œè¿™æ ·ä»»ä½•å•ä¸€èŠ‚ç‚¹çš„å†™å…¥éƒ½è¶³ä»¥å®Œæˆæ“ä½œï¼Œè€Œæ‰€æœ‰èŠ‚ç‚¹éƒ½å‚ä¸Žåˆ°è¯»æ“ä½œä¸­æ¥ç¡®ä¿è¿”å›žæœ€æ–°æ•°æ®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¹³è¡¡ä¸€è‡´æ€§å’Œå¯ç”¨æ€§&lt;/p>
&lt;p>ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨è®¸å¤šå®žé™…åº”ç”¨ä¸­ï¼Œä¼šé€‰æ‹© W&amp;gt;N/2 å’Œ R&amp;gt;N/2ï¼Œè¿™æ ·ä»»ä½•å†™æ“ä½œéƒ½è‡³å°‘ä¼šå½±å“å¤šæ•°èŠ‚ç‚¹ï¼Œä»»ä½•è¯»æ“ä½œä¹Ÿè‡³å°‘è®¿é—®å¤šæ•°èŠ‚ç‚¹ï¼Œä»Žè€Œæä¾›è‰¯å¥½çš„ä¸€è‡´æ€§ä¿è¯å’Œåˆç†çš„å¯ç”¨æ€§ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="ch-6-åˆ†åŒº">CH 6 åˆ†åŒº&lt;/h2>
&lt;h2 id="ch-7-äº‹åŠ¡">CH 7 äº‹åŠ¡&lt;/h2></description></item></channel></rss>